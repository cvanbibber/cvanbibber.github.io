{"ast":null,"code":"import React,{useEffect,useRef,useCallback}from'react';import{useReducedMotion}from'motion/react';// Redesigned CircuitField: subtle but technical\n// - Thick power rail shows electron flow (−) and V/I indicators\n// - Several low-voltage signal lines with positive carriers (+) easily pushed by a positive cursor\n// - Tasteful random pulses and electronics symbols (resistor, capacitor, diode, op-amp, ground)\n// - Performance: dual-canvas, DPR-capped, offscreen pause, reduced-motion static fallback\n// Floating electron for ambient interactivity\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CircuitField=()=>{const staticRef=useRef(null);const dynamicRef=useRef(null);const runningRef=useRef(false);const rafRef=useRef(null);const reduceMotion=useReducedMotion();const dprRef=useRef(1);const timeRef=useRef(0);const mouse=useRef({x:0,y:0,active:false,charge:1});// +1 positive probe, Alt toggles -1\nconst stateRef=useRef(null);const rand=(a,b)=>Math.random()*(b-a)+a;// Build a left-to-right polyline with slight vertical variation\nconst makeSignal=(w,y,dpr,label,color,stiffness,tubeR)=>{const points=[];const cols=6;for(let i=0;i<cols;i++){const x=i/(cols-1)*(w-40*dpr)+20*dpr;// 20px margin\nconst yj=y+rand(-8,8)*dpr;points.push({x0:x,y0:yj,x,y:yj});}// Segments and total length\nconst segs=[];let total=0;for(let i=0;i<points.length-1;i++){const ax={x:points[i].x,y:points[i].y};const bx={x:points[i+1].x,y:points[i+1].y};const len=Math.hypot(bx.x-ax.x,bx.y-ax.y);segs.push({ax,bx,len});total+=len;}const carriers=new Array(9).fill(0).map((_,i)=>({s:i/9*total,v:rand(0.045,0.08)*dpr,charge:1}));return{points,segs,total,carriers,color,tubeR,label,stiffness};};const pointAt=(sig,s)=>{// wrap s into [0,total]\nlet d=s%sig.total;if(d<0)d+=sig.total;for(let i=0;i<sig.segs.length;i++){const seg=sig.segs[i];if(d<=seg.len){const t=seg.len?d/seg.len:0;return{x:seg.ax.x+(seg.bx.x-seg.ax.x)*t,y:seg.ax.y+(seg.bx.y-seg.ax.y)*t};}d-=seg.len;}// fallback end\nconst last=sig.segs[sig.segs.length-1];return{x:last.bx.x,y:last.bx.y};};// Symbols removed per request (hidden)\nconst init=useCallback(()=>{const sCanvas=staticRef.current;const dCanvas=dynamicRef.current;if(!sCanvas||!dCanvas)return;const rect=sCanvas.getBoundingClientRect();const dpr=Math.min(window.devicePixelRatio||1,1.75);// cap for perf\ndprRef.current=dpr;const w=Math.max(1,Math.floor(rect.width*dpr));const h=Math.max(1,Math.floor(rect.height*dpr));sCanvas.width=w;sCanvas.height=h;dCanvas.width=w;dCanvas.height=h;// Multiple power rails (common voltages), thicker and more carriers\nconst railYs=[0.12,0.18,0.24,0.30,0.36].map(f=>Math.round(h*f));const railVs=[48.0,24.0,12.0,5.0,3.3];const rails=railYs.map((y,i)=>({y,thickness:Math.max(6,8*dpr),voltage:railVs[i],carriers:new Array(28).fill(0).map(()=>({x:Math.random()*w,v:(0.075+Math.random()*0.06)*dpr}))}));// Signals: lower voltage -> easier to deflect (lower stiffness)\nconst s1=makeSignal(w,Math.round(h*0.46),dpr,'0.8V','rgba(56,189,248,0.7)',0.06,8*dpr);const s2=makeSignal(w,Math.round(h*0.60),dpr,'1.2V','rgba(34,197,94,0.65)',0.08,9*dpr);const s3=makeSignal(w,Math.round(h*0.74),dpr,'3.3V','rgba(168,85,247,0.6)',0.12,10*dpr);// Increase carriers per signal (more electrons per wire)\nfor(const sig of[s1,s2,s3]){const count=18;const old=sig.carriers;const total=sig.total;sig.carriers=new Array(count).fill(0).map((_,i)=>({s:i/count*total,v:rand(0.055,0.095)*dpr,charge:1}));}const signals=[s1,s2,s3];// Floating electrons\nconst floaters=new Array(26).fill(0).map(()=>({x:Math.random()*w,y:Math.random()*h,vx:rand(-0.02,0.02)*dpr,vy:rand(-0.02,0.02)*dpr,charge:-1}));stateRef.current={w,h,rails,signals,floaters};// Static background: grid, power rail base, symbols, labels\nconst sctx=sCanvas.getContext('2d');if(!sctx)return;sctx.clearRect(0,0,w,h);// PCB grid\nsctx.save();sctx.strokeStyle='rgba(8,145,178,0.18)';sctx.lineWidth=1*dpr;const step=72*dpr;for(let x=0;x<w;x+=step){sctx.beginPath();sctx.moveTo(x,0);sctx.lineTo(x,h);sctx.stroke();}for(let y=0;y<h;y+=step){sctx.beginPath();sctx.moveTo(0,y);sctx.lineTo(w,y);sctx.stroke();}sctx.restore();// Power rails (multiple) with plus marks and voltage labels\nsctx.fillStyle='rgba(239,68,68,0.85)';sctx.font=\"\".concat(Math.max(10,11*dpr),\"px system-ui, -apple-system, Segoe UI, Roboto, sans-serif\");sctx.textAlign='left';sctx.textBaseline='middle';for(const rail of rails){const grad=sctx.createLinearGradient(0,rail.y,w,rail.y);grad.addColorStop(0,'rgba(239,68,68,0.35)');grad.addColorStop(1,'rgba(239,68,68,0.55)');sctx.strokeStyle=grad;sctx.lineWidth=rail.thickness;sctx.beginPath();sctx.moveTo(0,rail.y);sctx.lineTo(w,rail.y);sctx.stroke();for(let x=24*dpr;x<w;x+=110*dpr)sctx.fillText('+',x,rail.y-7*dpr);sctx.fillText(\"\".concat(rail.voltage.toFixed(1),\"V\"),18*dpr,rail.y-18*dpr);}},[]);const step=dt=>{const st=stateRef.current;const canvas=dynamicRef.current;if(!st||!canvas)return;const{w,h,rails,signals,floaters}=st;const dpr=dprRef.current;const ctx=canvas.getContext('2d');if(!ctx)return;timeRef.current+=dt;// Clear dynamic layer\nctx.clearRect(0,0,w,h);// Light wobble of signal control points (lower voltage -> looser)\nfor(const sig of signals){for(let i=0;i<sig.points.length;i++){const p=sig.points[i];// Keep x fixed; modulate y slightly\nconst a=(1-sig.stiffness)*5*dpr;// amplitude\nconst wv=0.001+sig.stiffness*0.003;// frequency\np.y=p.y0+a*Math.sin((timeRef.current+i*350)*wv);}// Recompute segments and total\nsig.segs.length=0;sig.total=0;for(let i=0;i<sig.points.length-1;i++){const ax={x:sig.points[i].x,y:sig.points[i].y};const bx={x:sig.points[i+1].x,y:sig.points[i+1].y};const len=Math.hypot(bx.x-ax.x,bx.y-ax.y);sig.segs.push({ax,bx,len});sig.total+=len;}}// Draw signals (wire) and carriers (+); increase carrier count handled in init\nctx.lineWidth=1*dpr;ctx.font=\"\".concat(Math.max(8,9*dpr),\"px system-ui, -apple-system, Segoe UI, Roboto, sans-serif\");ctx.textAlign='center';ctx.textBaseline='middle';for(const sig of signals){// wire\nctx.strokeStyle=sig.color;ctx.beginPath();for(let i=0;i<sig.points.length;i++){const p=sig.points[i];if(i===0)ctx.moveTo(p.x,p.y);else ctx.lineTo(p.x,p.y);}ctx.stroke();// label\nconst mid=pointAt(sig,sig.total*0.08);ctx.fillStyle='rgba(148,163,184,0.9)';ctx.fillText(sig.label,mid.x+8*dpr,mid.y-8*dpr);// carriers\nfor(const c of sig.carriers){c.s+=c.v*dt;if(c.s>sig.total)c.s-=sig.total;const base=pointAt(sig,c.s);// Cursor interaction: positive cursor repels positive carriers strongly on low-V signals\nlet drawX=base.x,drawY=base.y;if(mouse.current.active){const mx=mouse.current.x*dpr,my=mouse.current.y*dpr;const dx=drawX-mx,dy=drawY-my;const r2=dx*dx+dy*dy;const R=(sig.tubeR*5)**2;// influence area ~ 5x tube\nif(r2<R){const inv=1/Math.sqrt(r2+0.0001);const dirx=dx*inv,diry=dy*inv;const strength=(1-r2/R)*(1.8-sig.stiffness)*26*dpr;// softer if stiffer\nconst sign=mouse.current.charge*c.charge;// like charges repel\ndrawX+=dirx*strength*sign;drawY+=diry*strength*sign;}}// tube halo when displaced\nconst displaced=Math.hypot(drawX-base.x,drawY-base.y)>sig.tubeR*0.6;if(displaced){ctx.save();ctx.strokeStyle=sig.color.replace('0.7','0.25').replace('0.65','0.25').replace('0.6','0.25');ctx.lineWidth=2*dpr;ctx.beginPath();ctx.moveTo(base.x,base.y);ctx.lineTo(drawX,drawY);ctx.stroke();ctx.restore();}// carrier dot + label\nctx.fillStyle='rgba(252,211,77,0.9)';// amber-ish for positive quasi-charges\nctx.beginPath();ctx.arc(drawX,drawY,1.5*dpr,0,Math.PI*2);ctx.fill();ctx.fillStyle='rgba(252,211,77,0.95)';ctx.fillText('+',drawX,drawY-0.3*dpr);}}// Power rail electrons (−), minimally affected by cursor, for all rails\nctx.fillStyle='rgba(14,165,233,0.95)';for(const rail of rails){for(const e of rail.carriers){e.x+=e.v*dt;if(e.x>w+10*dpr)e.x-=w+20*dpr;let ex=e.x,ey=rail.y;if(mouse.current.active){const mx=mouse.current.x*dpr,my=mouse.current.y*dpr;const dx=ex-mx,dy=ey-my;const r2=dx*dx+dy*dy;const R=(80*dpr)**2;if(r2<R){const inv=1/Math.sqrt(r2+0.0001);const dirx=dx*inv,diry=dy*inv;const sign=-mouse.current.charge;// electrons negative\nconst strength=(1-r2/R)*6*dpr;ex+=dirx*strength*sign;ey+=diry*strength*sign;}}ctx.beginPath();ctx.arc(ex,ey,1.6*dpr,0,Math.PI*2);ctx.fill();ctx.fillStyle='rgba(14,165,233,0.95)';ctx.font=\"\".concat(Math.max(8,9*dpr),\"px system-ui, -apple-system, Segoe UI, Roboto, sans-serif\");ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('-',ex,ey-0.4*dpr);}}// Floating electrons (−) that are easy to move with cursor\nfor(const f of floaters){// random gentle drift\nf.vx+=rand(-0.0008,0.0008)*dpr*dt;f.vy+=rand(-0.0008,0.0008)*dpr*dt;// cursor influence (stronger, long-range)\nif(mouse.current.active){const mx=mouse.current.x*dpr,my=mouse.current.y*dpr;const dx=f.x-mx,dy=f.y-my;const r2=dx*dx+dy*dy+0.001;const R=(160*dpr)**2;if(r2<R){const inv=1/Math.sqrt(r2);const dirx=dx*inv,diry=dy*inv;const sign=-mouse.current.charge;// electron vs probe\nconst accel=(1-r2/R)*0.06*dpr;// pretty easy to move\nf.vx+=dirx*accel*sign;f.vy+=diry*accel*sign;}}// damping\nf.vx*=0.985;f.vy*=0.985;// move and wrap\nf.x+=f.vx*dt;f.y+=f.vy*dt;if(f.x<-10*dpr)f.x=w+10*dpr;else if(f.x>w+10*dpr)f.x=-10*dpr;if(f.y<-10*dpr)f.y=h+10*dpr;else if(f.y>h+10*dpr)f.y=-10*dpr;// draw\nctx.fillStyle='rgba(6,182,212,0.9)';ctx.beginPath();ctx.arc(f.x,f.y,1.6*dpr,0,Math.PI*2);ctx.fill();ctx.fillStyle='rgba(6,182,212,0.95)';ctx.font=\"\".concat(Math.max(8,9*dpr),\"px system-ui, -apple-system, Segoe UI, Roboto, sans-serif\");ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('-',f.x,f.y-0.4*dpr);}// Cursor glyph (probe)\nif(mouse.current.active){ctx.save();const mx=mouse.current.x*dpr,my=mouse.current.y*dpr;const col=mouse.current.charge>0?'rgba(239,68,68,0.75)':'rgba(59,130,246,0.75)';ctx.strokeStyle=col;ctx.lineWidth=1.5*dpr;ctx.beginPath();ctx.arc(mx,my,14*dpr,0,Math.PI*2);ctx.stroke();ctx.fillStyle=col;ctx.textAlign='center';ctx.textBaseline='middle';ctx.font=\"\".concat(Math.max(10,11*dpr),\"px system-ui, -apple-system, Segoe UI, Roboto, sans-serif\");ctx.fillText(mouse.current.charge>0?'+':'-',mx,my);ctx.restore();}};useEffect(()=>{const sCanvas=staticRef.current;const dCanvas=dynamicRef.current;if(!sCanvas||!dCanvas)return;if(reduceMotion){init();return;}init();let last=performance.now(),accum=0;const tick=now=>{if(!runningRef.current)return;const frame=now-last;last=now;accum+=frame;if(accum>=33){const dt=Math.min(33,accum);accum=0;step(dt);}rafRef.current=requestAnimationFrame(tick);};const start=()=>{if(runningRef.current)return;runningRef.current=true;last=performance.now();rafRef.current=requestAnimationFrame(tick);};const stop=()=>{runningRef.current=false;if(rafRef.current)cancelAnimationFrame(rafRef.current);rafRef.current=null;};// Pause when offscreen\nconst io=new IntersectionObserver(entries=>{for(const e of entries){if(e.isIntersecting)start();else stop();}},{root:null,threshold:0.05});io.observe(dCanvas);// Resize\nconst onResize=()=>init();window.addEventListener('resize',onResize);// Mouse: positive by default, hold Alt to flip to negative\nconst onMove=e=>{mouse.current.x=e.clientX;mouse.current.y=e.clientY;mouse.current.active=true;};const onLeave=()=>{mouse.current.active=false;};const onKey=e=>{mouse.current.charge=e.altKey?-1:1;};window.addEventListener('mousemove',onMove);window.addEventListener('mouseleave',onLeave);window.addEventListener('keydown',onKey);window.addEventListener('keyup',onKey);return()=>{stop();io.disconnect();window.removeEventListener('resize',onResize);window.removeEventListener('mousemove',onMove);window.removeEventListener('mouseleave',onLeave);window.removeEventListener('keydown',onKey);window.removeEventListener('keyup',onKey);};},[reduceMotion,init]);return/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-0 w-full h-full pointer-events-none select-none\",\"aria-hidden\":true,children:[/*#__PURE__*/_jsx(\"canvas\",{ref:staticRef,className:\"absolute inset-0 w-full h-full\"}),/*#__PURE__*/_jsx(\"canvas\",{ref:dynamicRef,className:\"absolute inset-0 w-full h-full\"})]});};export default CircuitField;","map":{"version":3,"names":["React","useEffect","useRef","useCallback","useReducedMotion","jsx","_jsx","jsxs","_jsxs","CircuitField","staticRef","dynamicRef","runningRef","rafRef","reduceMotion","dprRef","timeRef","mouse","x","y","active","charge","stateRef","rand","a","b","Math","random","makeSignal","w","dpr","label","color","stiffness","tubeR","points","cols","i","yj","push","x0","y0","segs","total","length","ax","bx","len","hypot","carriers","Array","fill","map","_","s","v","pointAt","sig","d","seg","t","last","init","sCanvas","current","dCanvas","rect","getBoundingClientRect","min","window","devicePixelRatio","max","floor","width","h","height","railYs","f","round","railVs","rails","thickness","voltage","s1","s2","s3","count","old","signals","floaters","vx","vy","sctx","getContext","clearRect","save","strokeStyle","lineWidth","step","beginPath","moveTo","lineTo","stroke","restore","fillStyle","font","concat","textAlign","textBaseline","rail","grad","createLinearGradient","addColorStop","fillText","toFixed","dt","st","canvas","ctx","p","wv","sin","mid","c","base","drawX","drawY","mx","my","dx","dy","r2","R","inv","sqrt","dirx","diry","strength","sign","displaced","replace","arc","PI","e","ex","ey","accel","col","performance","now","accum","tick","frame","requestAnimationFrame","start","stop","cancelAnimationFrame","io","IntersectionObserver","entries","isIntersecting","root","threshold","observe","onResize","addEventListener","onMove","clientX","clientY","onLeave","onKey","altKey","disconnect","removeEventListener","className","children","ref"],"sources":["C:/Github/cvanbibber.github.io/src/components/CircuitField.tsx"],"sourcesContent":["import React, { useEffect, useRef, useCallback } from 'react';\r\nimport { useReducedMotion } from 'motion/react';\r\n\r\n// Redesigned CircuitField: subtle but technical\r\n// - Thick power rail shows electron flow (−) and V/I indicators\r\n// - Several low-voltage signal lines with positive carriers (+) easily pushed by a positive cursor\r\n// - Tasteful random pulses and electronics symbols (resistor, capacitor, diode, op-amp, ground)\r\n// - Performance: dual-canvas, DPR-capped, offscreen pause, reduced-motion static fallback\r\n\r\ntype Vec2 = { x: number; y: number };\r\n\r\ntype Signal = {\r\n  points: Array<{ x0: number; y0: number; x: number; y: number }>; // control points\r\n  segs: Array<{ ax: Vec2; bx: Vec2; len: number }>;\r\n  total: number;\r\n  carriers: Array<{ s: number; v: number; charge: 1 | -1 }>; // s in [0,total]\r\n  color: string;\r\n  tubeR: number; // visual comfort radius\r\n  label: string; // e.g. 1.2V, 3.3V\r\n  stiffness: number; // curve wobble stiffness (higher -> stiffer)\r\n};\r\n\r\n// Floating electron for ambient interactivity\r\ntype Floater = { x: number; y: number; vx: number; vy: number; charge: -1 };\r\n\r\nconst CircuitField: React.FC = () => {\r\n  const staticRef = useRef<HTMLCanvasElement | null>(null);\r\n  const dynamicRef = useRef<HTMLCanvasElement | null>(null);\r\n  const runningRef = useRef(false);\r\n  const rafRef = useRef<number | null>(null);\r\n  const reduceMotion = useReducedMotion();\r\n\r\n  const dprRef = useRef(1);\r\n  const timeRef = useRef(0);\r\n  const mouse = useRef({ x: 0, y: 0, active: false, charge: 1 as 1 | -1 }); // +1 positive probe, Alt toggles -1\r\n\r\n  const stateRef = useRef<\r\n    | {\r\n        w: number;\r\n        h: number;\r\n        rails: Array<{\r\n          y: number;\r\n          thickness: number;\r\n          voltage: number; // volts\r\n          carriers: Array<{ x: number; v: number }>;\r\n        }>;\r\n        signals: Signal[];\r\n        floaters: Floater[];\r\n      }\r\n    | null\r\n  >(null);\r\n\r\n  const rand = (a: number, b: number) => Math.random() * (b - a) + a;\r\n\r\n  // Build a left-to-right polyline with slight vertical variation\r\n  const makeSignal = (w: number, y: number, dpr: number, label: string, color: string, stiffness: number, tubeR: number): Signal => {\r\n    const points: Array<{ x0: number; y0: number; x: number; y: number }> = [];\r\n    const cols = 6;\r\n    for (let i = 0; i < cols; i++) {\r\n      const x = (i / (cols - 1)) * (w - 40 * dpr) + 20 * dpr; // 20px margin\r\n      const yj = y + rand(-8, 8) * dpr;\r\n      points.push({ x0: x, y0: yj, x, y: yj });\r\n    }\r\n    // Segments and total length\r\n    const segs: Array<{ ax: Vec2; bx: Vec2; len: number }> = [];\r\n    let total = 0;\r\n    for (let i = 0; i < points.length - 1; i++) {\r\n      const ax = { x: points[i].x, y: points[i].y };\r\n      const bx = { x: points[i + 1].x, y: points[i + 1].y };\r\n      const len = Math.hypot(bx.x - ax.x, bx.y - ax.y);\r\n      segs.push({ ax, bx, len });\r\n      total += len;\r\n    }\r\n    const carriers = new Array(9).fill(0).map((_, i) => ({ s: (i / 9) * total, v: rand(0.045, 0.08) * dpr, charge: 1 as 1 }));\r\n    return { points, segs, total, carriers, color, tubeR, label, stiffness };\r\n  };\r\n\r\n  const pointAt = (sig: Signal, s: number): Vec2 => {\r\n    // wrap s into [0,total]\r\n    let d = s % sig.total; if (d < 0) d += sig.total;\r\n    for (let i = 0; i < sig.segs.length; i++) {\r\n      const seg = sig.segs[i];\r\n      if (d <= seg.len) {\r\n        const t = seg.len ? d / seg.len : 0;\r\n        return { x: seg.ax.x + (seg.bx.x - seg.ax.x) * t, y: seg.ax.y + (seg.bx.y - seg.ax.y) * t };\r\n      }\r\n      d -= seg.len;\r\n    }\r\n    // fallback end\r\n    const last = sig.segs[sig.segs.length - 1];\r\n    return { x: last.bx.x, y: last.bx.y };\r\n  };\r\n\r\n  // Symbols removed per request (hidden)\r\n\r\n  const init = useCallback(() => {\r\n    const sCanvas = staticRef.current;\r\n    const dCanvas = dynamicRef.current;\r\n    if (!sCanvas || !dCanvas) return;\r\n\r\n    const rect = sCanvas.getBoundingClientRect();\r\n    const dpr = Math.min(window.devicePixelRatio || 1, 1.75); // cap for perf\r\n    dprRef.current = dpr;\r\n    const w = Math.max(1, Math.floor(rect.width * dpr));\r\n    const h = Math.max(1, Math.floor(rect.height * dpr));\r\n    sCanvas.width = w; sCanvas.height = h;\r\n    dCanvas.width = w; dCanvas.height = h;\r\n\r\n    // Multiple power rails (common voltages), thicker and more carriers\r\n    const railYs = [0.12, 0.18, 0.24, 0.30, 0.36].map((f) => Math.round(h * f));\r\n    const railVs = [48.0, 24.0, 12.0, 5.0, 3.3];\r\n    const rails = railYs.map((y, i) => ({\r\n      y,\r\n      thickness: Math.max(6, 8 * dpr),\r\n      voltage: railVs[i],\r\n      carriers: new Array(28).fill(0).map(() => ({ x: Math.random() * w, v: (0.075 + Math.random() * 0.06) * dpr }))\r\n    }));\r\n\r\n    // Signals: lower voltage -> easier to deflect (lower stiffness)\r\n    const s1 = makeSignal(w, Math.round(h * 0.46), dpr, '0.8V', 'rgba(56,189,248,0.7)', 0.06, 8 * dpr);\r\n    const s2 = makeSignal(w, Math.round(h * 0.60), dpr, '1.2V', 'rgba(34,197,94,0.65)', 0.08, 9 * dpr);\r\n    const s3 = makeSignal(w, Math.round(h * 0.74), dpr, '3.3V', 'rgba(168,85,247,0.6)', 0.12, 10 * dpr);\r\n    // Increase carriers per signal (more electrons per wire)\r\n    for (const sig of [s1, s2, s3]) {\r\n      const count = 18; const old = sig.carriers; const total = sig.total;\r\n      sig.carriers = new Array(count).fill(0).map((_, i) => ({ s: (i / count) * total, v: rand(0.055, 0.095) * dpr, charge: 1 as 1 }));\r\n    }\r\n    const signals = [s1, s2, s3];\r\n\r\n    // Floating electrons\r\n    const floaters: Floater[] = new Array(26).fill(0).map(() => ({\r\n      x: Math.random() * w,\r\n      y: Math.random() * h,\r\n      vx: rand(-0.02, 0.02) * dpr,\r\n      vy: rand(-0.02, 0.02) * dpr,\r\n      charge: -1 as -1\r\n    }));\r\n\r\n    stateRef.current = { w, h, rails, signals, floaters };\r\n\r\n    // Static background: grid, power rail base, symbols, labels\r\n    const sctx = sCanvas.getContext('2d');\r\n    if (!sctx) return;\r\n    sctx.clearRect(0, 0, w, h);\r\n\r\n    // PCB grid\r\n    sctx.save();\r\n    sctx.strokeStyle = 'rgba(8,145,178,0.18)';\r\n    sctx.lineWidth = 1 * dpr;\r\n    const step = 72 * dpr;\r\n    for (let x = 0; x < w; x += step) { sctx.beginPath(); sctx.moveTo(x, 0); sctx.lineTo(x, h); sctx.stroke(); }\r\n    for (let y = 0; y < h; y += step) { sctx.beginPath(); sctx.moveTo(0, y); sctx.lineTo(w, y); sctx.stroke(); }\r\n    sctx.restore();\r\n\r\n    // Power rails (multiple) with plus marks and voltage labels\r\n    sctx.fillStyle = 'rgba(239,68,68,0.85)';\r\n    sctx.font = `${Math.max(10, 11 * dpr)}px system-ui, -apple-system, Segoe UI, Roboto, sans-serif`;\r\n    sctx.textAlign = 'left'; sctx.textBaseline = 'middle';\r\n    for (const rail of rails) {\r\n      const grad = sctx.createLinearGradient(0, rail.y, w, rail.y);\r\n      grad.addColorStop(0, 'rgba(239,68,68,0.35)');\r\n      grad.addColorStop(1, 'rgba(239,68,68,0.55)');\r\n      sctx.strokeStyle = grad;\r\n      sctx.lineWidth = rail.thickness;\r\n      sctx.beginPath(); sctx.moveTo(0, rail.y); sctx.lineTo(w, rail.y); sctx.stroke();\r\n      for (let x = 24 * dpr; x < w; x += 110 * dpr) sctx.fillText('+', x, rail.y - 7 * dpr);\r\n      sctx.fillText(`${rail.voltage.toFixed(1)}V`, 18 * dpr, rail.y - 18 * dpr);\r\n    }\r\n  }, []);\r\n\r\n  const step = (dt: number) => {\r\n    const st = stateRef.current; const canvas = dynamicRef.current;\r\n    if (!st || !canvas) return;\r\n  const { w, h, rails, signals, floaters } = st; const dpr = dprRef.current;\r\n    const ctx = canvas.getContext('2d'); if (!ctx) return;\r\n    timeRef.current += dt;\r\n\r\n    // Clear dynamic layer\r\n    ctx.clearRect(0, 0, w, h);\r\n\r\n    // Light wobble of signal control points (lower voltage -> looser)\r\n    for (const sig of signals) {\r\n      for (let i = 0; i < sig.points.length; i++) {\r\n        const p = sig.points[i];\r\n        // Keep x fixed; modulate y slightly\r\n        const a = (1 - sig.stiffness) * 5 * dpr; // amplitude\r\n        const wv = 0.001 + sig.stiffness * 0.003; // frequency\r\n        p.y = p.y0 + a * Math.sin((timeRef.current + i * 350) * wv);\r\n      }\r\n      // Recompute segments and total\r\n      sig.segs.length = 0; sig.total = 0;\r\n      for (let i = 0; i < sig.points.length - 1; i++) {\r\n        const ax = { x: sig.points[i].x, y: sig.points[i].y };\r\n        const bx = { x: sig.points[i + 1].x, y: sig.points[i + 1].y };\r\n        const len = Math.hypot(bx.x - ax.x, bx.y - ax.y);\r\n        sig.segs.push({ ax, bx, len }); sig.total += len;\r\n      }\r\n    }\r\n\r\n  // Draw signals (wire) and carriers (+); increase carrier count handled in init\r\n    ctx.lineWidth = 1 * dpr;\r\n    ctx.font = `${Math.max(8, 9 * dpr)}px system-ui, -apple-system, Segoe UI, Roboto, sans-serif`;\r\n    ctx.textAlign = 'center'; ctx.textBaseline = 'middle';\r\n    for (const sig of signals) {\r\n      // wire\r\n      ctx.strokeStyle = sig.color;\r\n      ctx.beginPath();\r\n      for (let i = 0; i < sig.points.length; i++) {\r\n        const p = sig.points[i]; if (i === 0) ctx.moveTo(p.x, p.y); else ctx.lineTo(p.x, p.y);\r\n      }\r\n      ctx.stroke();\r\n      // label\r\n      const mid = pointAt(sig, sig.total * 0.08);\r\n      ctx.fillStyle = 'rgba(148,163,184,0.9)';\r\n      ctx.fillText(sig.label, mid.x + 8 * dpr, mid.y - 8 * dpr);\r\n\r\n      // carriers\r\n      for (const c of sig.carriers) {\r\n        c.s += c.v * dt; if (c.s > sig.total) c.s -= sig.total;\r\n        const base = pointAt(sig, c.s);\r\n\r\n        // Cursor interaction: positive cursor repels positive carriers strongly on low-V signals\r\n        let drawX = base.x, drawY = base.y;\r\n        if (mouse.current.active) {\r\n          const mx = mouse.current.x * dpr, my = mouse.current.y * dpr;\r\n          const dx = drawX - mx, dy = drawY - my; const r2 = dx * dx + dy * dy;\r\n          const R = (sig.tubeR * 5) ** 2; // influence area ~ 5x tube\r\n          if (r2 < R) {\r\n            const inv = 1 / Math.sqrt(r2 + 0.0001);\r\n            const dirx = dx * inv, diry = dy * inv;\r\n            const strength = (1 - r2 / R) * (1.8 - sig.stiffness) * 26 * dpr; // softer if stiffer\r\n            const sign = mouse.current.charge * c.charge; // like charges repel\r\n            drawX += dirx * strength * sign;\r\n            drawY += diry * strength * sign;\r\n          }\r\n        }\r\n\r\n        // tube halo when displaced\r\n        const displaced = Math.hypot(drawX - base.x, drawY - base.y) > sig.tubeR * 0.6;\r\n        if (displaced) {\r\n          ctx.save();\r\n          ctx.strokeStyle = sig.color.replace('0.7', '0.25').replace('0.65', '0.25').replace('0.6', '0.25');\r\n          ctx.lineWidth = 2 * dpr;\r\n          ctx.beginPath(); ctx.moveTo(base.x, base.y); ctx.lineTo(drawX, drawY); ctx.stroke();\r\n          ctx.restore();\r\n        }\r\n\r\n        // carrier dot + label\r\n        ctx.fillStyle = 'rgba(252,211,77,0.9)'; // amber-ish for positive quasi-charges\r\n        ctx.beginPath(); ctx.arc(drawX, drawY, 1.5 * dpr, 0, Math.PI * 2); ctx.fill();\r\n        ctx.fillStyle = 'rgba(252,211,77,0.95)';\r\n        ctx.fillText('+', drawX, drawY - 0.3 * dpr);\r\n      }\r\n    }\r\n\r\n    // Power rail electrons (−), minimally affected by cursor, for all rails\r\n    ctx.fillStyle = 'rgba(14,165,233,0.95)';\r\n    for (const rail of rails) {\r\n      for (const e of rail.carriers) {\r\n        e.x += e.v * dt; if (e.x > w + 10 * dpr) e.x -= (w + 20 * dpr);\r\n        let ex = e.x, ey = rail.y;\r\n        if (mouse.current.active) {\r\n          const mx = mouse.current.x * dpr, my = mouse.current.y * dpr;\r\n          const dx = ex - mx, dy = ey - my; const r2 = dx * dx + dy * dy;\r\n          const R = (80 * dpr) ** 2;\r\n          if (r2 < R) {\r\n            const inv = 1 / Math.sqrt(r2 + 0.0001);\r\n            const dirx = dx * inv, diry = dy * inv;\r\n            const sign = -mouse.current.charge; // electrons negative\r\n            const strength = (1 - r2 / R) * 6 * dpr;\r\n            ex += dirx * strength * sign;\r\n            ey += diry * strength * sign;\r\n          }\r\n        }\r\n        ctx.beginPath(); ctx.arc(ex, ey, 1.6 * dpr, 0, Math.PI * 2); ctx.fill();\r\n        ctx.fillStyle = 'rgba(14,165,233,0.95)'; ctx.font = `${Math.max(8, 9 * dpr)}px system-ui, -apple-system, Segoe UI, Roboto, sans-serif`;\r\n        ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText('-', ex, ey - 0.4 * dpr);\r\n      }\r\n    }\r\n\r\n    // Floating electrons (−) that are easy to move with cursor\r\n    for (const f of floaters) {\r\n      // random gentle drift\r\n      f.vx += rand(-0.0008, 0.0008) * dpr * dt;\r\n      f.vy += rand(-0.0008, 0.0008) * dpr * dt;\r\n      // cursor influence (stronger, long-range)\r\n      if (mouse.current.active) {\r\n        const mx = mouse.current.x * dpr, my = mouse.current.y * dpr;\r\n        const dx = f.x - mx, dy = f.y - my; const r2 = dx * dx + dy * dy + 0.001;\r\n        const R = (160 * dpr) ** 2;\r\n        if (r2 < R) {\r\n          const inv = 1 / Math.sqrt(r2);\r\n          const dirx = dx * inv, diry = dy * inv;\r\n          const sign = -mouse.current.charge; // electron vs probe\r\n          const accel = (1 - r2 / R) * 0.06 * dpr; // pretty easy to move\r\n          f.vx += dirx * accel * sign;\r\n          f.vy += diry * accel * sign;\r\n        }\r\n      }\r\n      // damping\r\n      f.vx *= 0.985; f.vy *= 0.985;\r\n      // move and wrap\r\n      f.x += f.vx * dt; f.y += f.vy * dt;\r\n      if (f.x < -10 * dpr) f.x = w + 10 * dpr; else if (f.x > w + 10 * dpr) f.x = -10 * dpr;\r\n      if (f.y < -10 * dpr) f.y = h + 10 * dpr; else if (f.y > h + 10 * dpr) f.y = -10 * dpr;\r\n      // draw\r\n      ctx.fillStyle = 'rgba(6,182,212,0.9)';\r\n      ctx.beginPath(); ctx.arc(f.x, f.y, 1.6 * dpr, 0, Math.PI * 2); ctx.fill();\r\n      ctx.fillStyle = 'rgba(6,182,212,0.95)'; ctx.font = `${Math.max(8, 9 * dpr)}px system-ui, -apple-system, Segoe UI, Roboto, sans-serif`;\r\n      ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText('-', f.x, f.y - 0.4 * dpr);\r\n    }\r\n\r\n    // Cursor glyph (probe)\r\n    if (mouse.current.active) {\r\n      ctx.save();\r\n      const mx = mouse.current.x * dpr, my = mouse.current.y * dpr;\r\n      const col = mouse.current.charge > 0 ? 'rgba(239,68,68,0.75)' : 'rgba(59,130,246,0.75)';\r\n      ctx.strokeStyle = col; ctx.lineWidth = 1.5 * dpr;\r\n      ctx.beginPath(); ctx.arc(mx, my, 14 * dpr, 0, Math.PI * 2); ctx.stroke();\r\n      ctx.fillStyle = col; ctx.textAlign = 'center'; ctx.textBaseline = 'middle';\r\n      ctx.font = `${Math.max(10, 11 * dpr)}px system-ui, -apple-system, Segoe UI, Roboto, sans-serif`;\r\n      ctx.fillText(mouse.current.charge > 0 ? '+' : '-', mx, my);\r\n      ctx.restore();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const sCanvas = staticRef.current; const dCanvas = dynamicRef.current;\r\n    if (!sCanvas || !dCanvas) return;\r\n\r\n    if (reduceMotion) { init(); return; }\r\n    init();\r\n\r\n    let last = performance.now(), accum = 0;\r\n    const tick = (now: number) => {\r\n      if (!runningRef.current) return;\r\n      const frame = now - last; last = now; accum += frame;\r\n      if (accum >= 33) { const dt = Math.min(33, accum); accum = 0; step(dt); }\r\n      rafRef.current = requestAnimationFrame(tick);\r\n    };\r\n    const start = () => { if (runningRef.current) return; runningRef.current = true; last = performance.now(); rafRef.current = requestAnimationFrame(tick); };\r\n    const stop = () => { runningRef.current = false; if (rafRef.current) cancelAnimationFrame(rafRef.current); rafRef.current = null; };\r\n\r\n    // Pause when offscreen\r\n    const io = new IntersectionObserver((entries) => { for (const e of entries) { if (e.isIntersecting) start(); else stop(); } }, { root: null, threshold: 0.05 });\r\n    io.observe(dCanvas);\r\n\r\n    // Resize\r\n    const onResize = () => init();\r\n    window.addEventListener('resize', onResize);\r\n\r\n    // Mouse: positive by default, hold Alt to flip to negative\r\n    const onMove = (e: MouseEvent) => { mouse.current.x = e.clientX; mouse.current.y = e.clientY; mouse.current.active = true; };\r\n    const onLeave = () => { mouse.current.active = false; };\r\n    const onKey = (e: KeyboardEvent) => { mouse.current.charge = e.altKey ? -1 : 1; };\r\n    window.addEventListener('mousemove', onMove);\r\n    window.addEventListener('mouseleave', onLeave);\r\n    window.addEventListener('keydown', onKey);\r\n    window.addEventListener('keyup', onKey);\r\n\r\n    return () => {\r\n      stop(); io.disconnect();\r\n      window.removeEventListener('resize', onResize);\r\n      window.removeEventListener('mousemove', onMove);\r\n      window.removeEventListener('mouseleave', onLeave);\r\n      window.removeEventListener('keydown', onKey);\r\n      window.removeEventListener('keyup', onKey);\r\n    };\r\n  }, [reduceMotion, init]);\r\n\r\n  return (\r\n    <div className=\"absolute inset-0 w-full h-full pointer-events-none select-none\" aria-hidden>\r\n      <canvas ref={staticRef} className=\"absolute inset-0 w-full h-full\" />\r\n      <canvas ref={dynamicRef} className=\"absolute inset-0 w-full h-full\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CircuitField;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}